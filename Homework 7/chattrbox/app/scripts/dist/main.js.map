{"version":3,"sources":["ws-client.js","app.js","main.js"],"names":["socket","init","url","WebSocket","console","log","registerOpenHandler","handlerFunction","onopen","registerMessageHandler","onmessage","e","data","JSON","parse","sendMessage","payload","send","stringify","ChatApp","message","ChatMessage","serialize","m","user","u","timestamp","t","Date","getTime","username"],"mappings":";AA4Be,aA5Bf,IAAIA,EAEJ,SAASC,EAAKC,GACZF,EAAS,IAAIG,UAAUD,GACvBE,QAAQC,IAAI,iBAKd,SAASC,EAAoBC,GAC3BP,EAAOQ,OAAS,WACdJ,QAAQC,IAAI,QACZE,KAIJ,SAASE,EAAuBF,GAC9BP,EAAOU,UAAY,SAACC,GAClBP,QAAQC,IAAI,UAAWM,EAAEC,MACrBA,IAAAA,EAAOC,KAAKC,MAAMH,EAAEC,MACxBL,EAAgBK,IAIpB,SAASG,EAAYC,GACnBhB,EAAOiB,KAAKJ,KAAKK,UAAUF,IAGd,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAAA,IAAA,EAAA,CACbf,KAAAA,EACAK,oBAAAA,EACAG,uBAAAA,EACAM,YAAAA,GAJa,QAAA,QAAA;;ACUAI,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EAtCf,IAAA,EAAA,EAAA,QAAA,gBAsCeA,SAAAA,EAAAA,GAAAA,OAAAA,GAAAA,EAAAA,WAAAA,EAAAA,CAAAA,QAAAA,GAAAA,SAAAA,EAAAA,EAAAA,GAAAA,IAAAA,IAAAA,EAAAA,EAAAA,EAAAA,EAAAA,OAAAA,IAAAA,CAAAA,IAAAA,EAAAA,EAAAA,GAAAA,EAAAA,WAAAA,EAAAA,aAAAA,EAAAA,EAAAA,cAAAA,EAAAA,UAAAA,IAAAA,EAAAA,UAAAA,GAAAA,OAAAA,eAAAA,EAAAA,EAAAA,IAAAA,IAAAA,SAAAA,EAAAA,EAAAA,EAAAA,GAAAA,OAAAA,GAAAA,EAAAA,EAAAA,UAAAA,GAAAA,GAAAA,EAAAA,EAAAA,GAAAA,EAAAA,SAAAA,EAAAA,EAAAA,GAAAA,KAAAA,aAAAA,GAAAA,MAAAA,IAAAA,UAAAA,qCApCTA,IAAAA,EACJ,SAAc,IAAA,EAAA,KAAA,GAELlB,EAAAA,QAAAA,KAAK,uBACLK,EAAAA,QAAAA,oBAAoB,WACrBc,IAAAA,EAAU,IAAIC,EAAY,CAC5BD,QAAS,SAEJL,EAAAA,QAAAA,YAAYK,EAAQE,eAEtBb,EAAAA,QAAAA,uBAAuB,SAACG,GAC7BR,QAAQC,IAAIO,MAKZS,EAoBSF,WAfV,SAAA,EAAA,GAHQI,IAAAA,EAATH,EAAAA,QACAI,EAAAA,EAAAA,KAAMC,OAAI,IAAA,EAAA,SAET,EADDC,EAAAA,EAAAA,UAAWC,OAAK,IAAA,GAAA,IAAIC,MAAQC,UAC3B,EAAA,EAAA,KAAA,GACIC,KAAAA,SAAWL,EACXL,KAAAA,QAAUG,EACVG,KAAAA,UAAYC,EAYNR,OAAAA,EAAAA,EAAAA,CAAAA,CAAAA,IAAAA,YAVD,MAAA,WACH,MAAA,CACLK,KAAM,KAAKA,KACXJ,QAAS,KAAKA,QACdM,UAAW,KAAKA,eAMPP,EAAAA,GAAAA,EAAAA,EAAAA,QAAAA,QAAAA;;ACrCf,aADA,IAAA,EAAA,EAAA,QAAA,UACA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAA,IAAIA,EAAJ","file":"main.js","sourceRoot":"..\\src","sourcesContent":["let socket;\r\n\r\nfunction init(url) {\r\n  socket = new WebSocket(url);\r\n  console.log('connecting...');\r\n}\r\n\r\n\r\n\r\nfunction registerOpenHandler(handlerFunction) {\r\n  socket.onopen = () => {\r\n    console.log('open');\r\n    handlerFunction();\r\n  };\r\n}\r\n\r\nfunction registerMessageHandler(handlerFunction) {\r\n  socket.onmessage = (e) => {\r\n    console.log('message', e.data);\r\n    let data = JSON.parse(e.data);\r\n    handlerFunction(data);\r\n  };\r\n}\r\n\r\nfunction sendMessage(payload) {\r\n  socket.send(JSON.stringify(payload));\r\n}\r\n\r\nexport default {\r\n  init,\r\n  registerOpenHandler,\r\n  registerMessageHandler,\r\n  sendMessage\r\n}\r\n","import socket from './ws-client';\r\n\r\nclass ChatApp {\r\n  constructor() {\r\n    //console.log('Hello ES6!');\r\n    socket.init('ws://localhost:3001');\r\n    socket.registerOpenHandler(() => {\r\n      let message = new ChatMessage({\r\n        message: 'pow!'\r\n      });\r\n      socket.sendMessage(message.serialize());\r\n    });\r\n    socket.registerMessageHandler((data) => {\r\n      console.log(data);\r\n    });\r\n  }\r\n}\r\n\r\nclass ChatMessage {\r\n  constructor({\r\n    message: m,\r\n    user: u = 'batman',\r\n    timestamp: t = (new Date()).getTime()\r\n  }) {\r\n    this.username = u;\r\n    this.message = m;\r\n    this.timestamp = t;\r\n  }\r\n  serialize() {\r\n    return {\r\n      user: this.user,\r\n      message: this.message,\r\n      timestamp: this.timestamp\r\n    };\r\n  }\r\n}\r\n//new ChatApp();\r\n\r\nexport default ChatApp\r\n","import ChatApp from './app';\r\nnew ChatApp();\r\n"]}